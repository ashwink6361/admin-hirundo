<div class="widgets">
    <div class="row">
        <div class="col-lg-12 col-md-12">
            <div ba-panel ba-panel-title="Todays Orders" ba-panel-class="with-scroll table-panel mh-500">
                <div class="" style="right: 21px;margin-top: -42px;position: absolute;">Current Time: {{ clock | date:'HH:mm:ss'}}</div>
                <div ng-show="ordersList.length<1" class="text-center">
                    No order available
                </div>
                <table class="table" ng-show="ordersList.length">
                    <thead>
                        <tr>
                            <th class="w-50"></th>
                            <th>Waiter</th>
                            <th>Room</th>
                            <th>Table</th>
                            <th>Order Time</th>
                            <th>Status</th>
                            <th class="w-180">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat-start="order in ordersList | orderBy: '-created_at'">
                            <td class="w-50">
                                <button ng-if="order.expanded" class="btn-expand" ng-click="order.expanded = false">
                                    <i class="fa fa-minus"></i>
                                </button>
                                <button ng-if="!order.expanded" class="btn-expand" ng-click="order.expanded = true">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </td>
                            <td>{{order.waiter.firstName}}</td>
                            <td>{{order.room.name}}</td>
                            <td>{{order.tableName}}</td>
                            <td>{{order.created_at | date:'hh:mm a'}}</td>
                            <td>{{getOrderStatus(order.status)}}</td>
                            <td class="w-180">
                                <button type="button" class="text-btn" data-toggle="modal" ng-click="updateOrder(order, 1)">Update</button>
                                <button type="button" class="text-btn" ng-click="checkout(order.room._id,order.table)">Checkout</button>
                            </td>
                        </tr>
                        <tr ng-if="order.expanded" ng-repeat-end="">
                            <td colspan="7" style="padding: 0">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Item Name</th>
                                            <th>Step</th>                                            
                                            <th>Item Price</th>
                                            <th>Item Quantity</th>
                                            <th>Status</th>
                                            <th class="w-310">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="item in order.item">
                                            <td>
                                                {{item.id.name}}
                                                <span class="variant-container" ng-repeat="varient in item.variant"><i ng-show="varient.status == 1">+</i><i ng-show="varient.status == 0">-</i>{{varient.name}} &euro;{{varient.price}}</span>
                                            </td>
                                            <td>{{item.step}}</td>                                            
                                            <td>&euro; {{item.price}}</td>
                                            <td>{{item.quantity}}</td>
                                            <td>{{getOrderStatus(item.status)}}</td>
                                            <td>
                                                <button type="button" class="text-btn" ng-click="updateItem(item, order._id, 4)">In prepare</button>
                                                <button type="button" class="text-btn" ng-click="updateItem(item, order._id, 2)">Prepared</button>
                                                <button type="button" class="text-btn" ng-click="updateItem(item, order._id, 1)">Deliverd</button>
                                                <button type="button" class="text-btn" ng-click="updateItem(item, order._id, 3)">Cancel</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>